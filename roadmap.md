# Batumi Lunch Bot ‚Üí Web Roadmap

## Executive Summary

## Implementation Status
- ‚úÖ Backend API: —Å–º. `backend/app/api/v1`
- ‚úÖ –î–æ–º–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã: `backend/app/domain` (–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏–∑ Telegram-–±–æ—Ç–∞)
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î: `backend/app/db/migrations`
- ‚úÖ –°–∫—Ä–∏–ø—Ç—ã –º–∏–≥—Ä–∞—Ü–∏–∏/—Å–∏–¥–æ–≤: `scripts/migrate_json_to_db.py`, `scripts/seed_menu.py`
- ‚úÖ Frontend Next.js: `frontend/app` (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∏ –∞–¥–º–∏–Ω—Å–∫–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã)
- ‚úÖ CI / Docker: `.github/workflows/ci.yml`, `deploy/docker-compose.yml`, Dockerfile.api/web

- Telegram-–±–æ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ –æ–¥–Ω–æ–º –º–æ–¥—É–ª–µ —Å 14 —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ –¥–∏–∞–ª–æ–≥–∞ –∏ —Ö—Ä–∞–Ω–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ JSON, —á—Ç–æ —É—Å–ª–æ–∂–Ω—è–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫—É (—Å–º. `bot.py:83-99`).
- –ö–ª—é—á–µ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏: –ø—Ä–æ—Å–º–æ—Ç—Ä –º–µ–Ω—é, –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ —Å –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–µ–π, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–Ω—é –∏ –æ—Ç—á—ë—Ç—ã –∞–¥–º–∏–Ω–∞; –∏—Ö –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤ –≤–µ–± —Å —É–ª—É—á—à–µ–Ω–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π (`bot.py:951-1760`, `bot.py:1189-1385`).
- –î–æ–º–µ–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –∑–∞–∫–∞–∑—ã, –º–µ–Ω—é, –æ–∫–Ω–æ –∑–∞–∫–∞–∑–æ–≤) —É–∂–µ –≤—ã–¥–µ–ª–µ–Ω—ã –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ —Å–ª–æ–π —Å–µ—Ä–≤–∏—Å–æ–≤ –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (`bot.py:240-520`, `orders.json`, `users.json`).
- –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É: SPA –Ω–∞ React/Next.js, backend –Ω–∞ FastAPI, PostgreSQL –¥–ª—è –¥–∞–Ω–Ω—ã—Ö, Redis –¥–ª—è –∫–µ—à–∞/—Å–µ—Å—Å–∏–π, S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è –º–µ–¥–∏–∞.
- –ú–∏–≥—Ä–∞—Ü–∏—è –ø–æ–π–¥—ë—Ç —Ç—Ä–µ–º—è –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–º–∏: –≤—ã–¥–µ–ª–µ–Ω–∏–µ –¥–æ–º–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, –∑–∞–ø—É—Å–∫ REST API –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å –±–æ—Ç–æ–º, –∑–∞—Ç–µ–º –¥–æ—Å—Ç–∞–≤–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞; –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω—ã —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –∏ —Ñ–∏—á–∞-—Ñ–ª–∞–≥–∏.
- –û—Å–Ω–æ–≤–Ω—ã–µ UX-—É–ª—É—á—à–µ–Ω–∏—è –≤–µ–±–∞: –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ –Ω–∞ –Ω–µ–¥–µ–ª—é, —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∞–¥—Ä–µ—Å–∞, –≤–∏–∑—É–∞–ª—å–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å, –¥–∞—à–±–æ—Ä–¥ –∞–¥–º–∏–Ω–∞, email/push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.
- –†–∏—Å–∫–∏: —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞–∫–∞–∑–æ–≤ –º–µ–∂–¥—É –±–æ—Ç–æ–º –∏ —Å–∞–π—Ç–æ–º, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–∞–º–∏, —Ä–æ—Å—Ç –Ω–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏ JSON-—Ö—Ä–∞–Ω–∏–ª–∏—â–∞—Ö; –≤ –ø–ª–∞–Ω–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω—ã –º–µ—Ä—ã –∫–æ–Ω—Ç—Ä–æ–ª—è.

## Table of Contents
- [1. –ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞](#1-–∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è-–∫–æ–¥–∞)
- [2. –ú–æ–¥–µ–ª—å –¥–æ–º–µ–Ω–∞ –∏ –¥–∞–Ω–Ω—ã–µ](#2-–º–æ–¥–µ–ª—å-–¥–æ–º–µ–Ω–∞-–∏-–¥–∞–Ω–Ω—ã–µ)
- [3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –±–æ—Ç–∞ ‚Üí –≤–µ–±-—Å–∞–π—Ç](#3-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ-—Å—Ü–µ–Ω–∞—Ä–∏–∏-–±–æ—Ç–∞--–≤–µ–±-—Å–∞–π—Ç)
- [4. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ü–µ–ª–µ–≤–æ–≥–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](#4-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Ü–µ–ª–µ–≤–æ–≥–æ-–≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
- [5. –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏–∫–∏ –∏–∑ –±–æ—Ç–∞](#5-–ø–ª–∞–Ω-–º–∏–≥—Ä–∞—Ü–∏–∏-–ª–æ–≥–∏–∫–∏-–∏–∑-–±–æ—Ç–∞)
- [6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∫–∞—á–µ—Å—Ç–≤–æ](#6-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ-–∏-–∫–∞—á–µ—Å—Ç–≤–æ)
- [7. DevEx –∏ CI/CD](#7-devex-–∏-cicd)
- [8. –†–∏—Å–∫–∏ –∏ –æ—Ç–∫—Ä—ã—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã](#8-—Ä–∏—Å–∫–∏-–∏-–æ—Ç–∫—Ä—ã—Ç—ã–µ-–≤–æ–ø—Ä–æ—Å—ã)
- [Quickstart](#quickstart)

## 1. –ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞

### –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –∫–ª—é—á–µ–≤—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã
- `bot.py` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π async-–±–æ—Ç –Ω–∞ `python-telegram-bot` v22.3, –≤–∫–ª—é—á–∞–µ—Ç –≤—Å–µ FSM-—Å–æ—Å—Ç–æ—è–Ω–∏—è, –¥–æ–º–µ–Ω–Ω—É—é –ª–æ–≥–∏–∫—É, —Ä–∞–±–æ—Ç—É —Å —Ñ–∞–π–ª–∞–º–∏ (`bot.py:83-2755`).
- `keyboards.py` ‚Äî —Ñ–∞–±—Ä–∏–∫–∏ ReplyKeyboard/InlineKeyboard; –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –µ–¥–∏–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥ –∫–Ω–æ–ø–æ–∫ (`keyboards.py:3-159`).
- `config.py` / `config_secret.py` ‚Äî –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ —Å–µ–∫—Ä–µ—Ç—ã (–Ω—É–∂–Ω–æ —Ä–æ—Ç–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞, —Ñ–∞–π–ª —Ö—Ä–∞–Ω–∏—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ) (`config.py:1-19`, `config_secret.py:1-11`).
- –î–∞–Ω–Ω—ã–µ: `menu.json`, `orders.json`, `users.json`, `order_window.json`, `Menu.jpeg`, `DishPhotos/*`.
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è: `bot_state.pickle` —á–µ—Ä–µ–∑ `PicklePersistence` (`bot.py:2581-2597`).
- –õ–æ–≥–∏: `logs/`, —Ä–æ—Ç–∞—Ü–∏—è –ø–æ –¥–Ω—è–º (`bot.py:101-118`).

### –ö–æ–º–∞–Ω–¥—ã –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
| –ö–æ–º–∞–Ω–¥–∞/—Ç—Ä–∏–≥–≥–µ—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –•–µ–Ω–¥–ª–µ—Ä |
| --- | --- | --- |
| `/start`, `üîÑ –í –Ω–∞—á–∞–ª–æ` | –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è, –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ, –≤—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ | `start()` (`bot.py:951-1038`)
| `/order <ID>` / inline –∫–Ω–æ–ø–∫–∞ | –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–∫–∞–∑–∞, –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ | `order_info()` (`bot.py:2084-2139`)
| `/cancel <ID>` / inline | –û—Ç–º–µ–Ω–∞ –∑–∞–∫–∞–∑–∞ –≤–ª–∞–¥–µ–ª—å—Ü–µ–º/–∞–¥–º–∏–Ω–æ–º | `cancel_order_command()`, `cancel_order_callback()` (`bot.py:2141-2269`)
| `/sms <HTML>` | –ê–¥–º–∏–Ω—Å–∫–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞ | `broadcast()` (`bot.py:1353-1385`)
| `/my_profile` | –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è | `my_profile()` (`bot.py:2399-2431`)
| `–ü–æ–∫–∞–∑–∞—Ç—å –º–µ–Ω—é –Ω–∞ –Ω–µ–¥–µ–ª—é` | –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—Å—Ç+—Ñ–æ—Ç–æ –º–µ–Ω—é, –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ –≤—ã–±–æ—Ä—É –¥–Ω—è | `show_menu()` (`bot.py:1386-1413`)
| `–ó–∞–∫–∞–∑–∞—Ç—å –æ–±–µ–¥` | –ó–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∑–∞–∫–∞–∑–∞ | `order_lunch()` (`bot.py:1415-1428`)
| –ö–Ω–æ–ø–∫–∏ admin-ui | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–Ω—é, –æ—Ç—á—ë—Ç—ã, —Ä–µ–∂–∏–º—ã | `admin_manage_menu()`, `admin_report_pick()` –∏ –¥—Ä. (`bot.py:520-938`, `bot.py:1053-1185`)

### –°–æ—Å—Ç–æ—è–Ω–∏—è FSM ConversationHandler
| –°–æ—Å—Ç–æ—è–Ω–∏–µ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã |
| --- | --- | --- |
| `MENU` | –ì–ª–∞–≤–Ω–∞—è —Å—Ü–µ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è/–∞–¥–º–∏–Ω–∞ | –ö–æ–º–∞–Ω–¥—ã, –º–µ–Ω—é, –æ—Ç—á—ë—Ç—ã, –∞–¥–º–∏–Ω-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (`bot.py:2619-2634`)
| `ORDER_DAY` | –í—ã–±–æ—Ä –¥–Ω—è –¥–æ—Å—Ç–∞–≤–∫–∏ | `select_day()` (`bot.py:1429-1474`)
| `ORDER_COUNT` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ä—Ü–∏–π | `select_count()`, `back_to_day()` (`bot.py:1488-1559`, `bot.py:1786-1794`)
| `UPDATE_ORDER_COUNT` | –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∑–∞–∫–∞–∑–∞ | `update_order_count_choice()` (`bot.py:2288-2346`)
| `ADDRESS` | –°–±–æ—Ä –∞–¥—Ä–µ—Å–∞/—Ç–µ–ª–µ—Ñ–æ–Ω–∞ | `address_phone()` (`bot.py:1979-2078`)
| `CONFIRM` | –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ | `confirm_order()`, `confirm_save_phone()` (`bot.py:1648-1760`, `bot.py:1803-1845`)
| `DUPLICATE` | –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –∑–∞–∫–∞–∑–æ–≤ | `resolve_duplicate_order()` (`bot.py:1846-1963`)
| `ADMIN_*` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–Ω—é, –Ω–µ–¥–µ–ª–µ–π, —Ñ–æ—Ç–æ | `admin_menu_*` (`bot.py:520-938`, `bot.py:2687-2748`)

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- Telegram Bot API —á–µ—Ä–µ–∑ long polling —Å `HTTPXRequest`, –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Ç–∞–π–º–∞—É—Ç—ã (`bot.py:2581-2597`).
- –ù–µ—Ç –≤–µ–±—Ö—É–∫–æ–≤, cron, –æ—á–µ—Ä–µ–¥–µ–π. –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ gif `cat-driving.mp4` –ø—Ä–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏ (`bot.py:1632-1675`).
- –•—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ.
- ENV –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è; —Ç–æ–∫–µ–Ω/–∞–¥–º–∏–Ω-id –≤ `config_secret.py` (—Ä–æ—Ç–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞).

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Ä–∞–Ω—Ç–∞–π–º
- Python 3.13.2 (`venv/bin/python --version`).
- `python-telegram-bot==22.3`, `httpx==0.28.1`, `anyio`, `httpcore`, `idna`, `certifi`, `sniffio` (`pip freeze`).
- –ù–µ—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ (ORM, –º–∏–≥—Ä–∞—Ü–∏–π, —à–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤).

## 2. –ú–æ–¥–µ–ª—å –¥–æ–º–µ–Ω–∞ –∏ –¥–∞–Ω–Ω—ã–µ

### –°—É—â–Ω–æ—Å—Ç–∏ –∏ –∞—Ç—Ä–∏–±—É—Ç—ã
| –°—É—â–Ω–æ—Å—Ç—å | –ê—Ç—Ä–∏–±—É—Ç—ã | –•—Ä–∞–Ω–∏–ª–∏—â–µ | –°–≤—è–∑–∏/–ø—Ä–∏–º–µ—á–∞–Ω–∏—è |
| --- | --- | --- | --- |
| –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å | `address`, `phone`, Telegram `user_id` | `users.json` (`users.json`) | –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üî –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–∫–∞–∑–æ–≤. –ü—Ä–æ—Ñ–∏–ª—å –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ `address_phone()` (`bot.py:1979-2035`).
| –ó–∞–∫–∞–∑ | `order_id`, `user_id`, `day`, `count`, `menu`, `status`, `created_at`, `delivery_week_start`, `next_week`, `updated_at` | `orders.json` | –°—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `set_order_status()` (`bot.py:395-418`). –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –ø–æ –¥–Ω—é –≤ `find_user_order_same_day()` (`bot.py:418-474`).
| –ú–µ–Ω—é –Ω–µ–¥–µ–ª–∏ | `week`, `menu[day]=list[str]` | `menu.json` | CRUD —á–µ—Ä–µ–∑ `admin_menu_*` (`bot.py:520-864`).
| –û–∫–Ω–æ –∑–∞–∫–∞–∑–æ–≤ | `next_week_enabled`, `week_start` | `order_window.json` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ `admin_open_next_week_orders()` (`bot.py:653-679`).
| –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞ | `user_data` (pending_order, profile –∏ —Ç.–¥.) | `bot_state.pickle` | –ê–≤—Ç–æ-—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ `PicklePersistence` (`bot.py:2611-2755`).

### –•—Ä–∞–Ω–∏–ª–∏—â–∞ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- JSON-—Ñ–∞–π–ª—ã –±–µ–∑ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π ‚Üí —Ä–∏—Å–∫ –≥–æ–Ω–æ–∫ –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–∞—Ö.
- –ù–µ—Ç –∏–Ω–¥–µ–∫—Å–æ–≤; –ø–æ–∏—Å–∫ –ø–æ –∑–∞–∫–∞–∑–∞–º –ª–∏–Ω–µ–π–Ω—ã–π (`bot.py:418-474`, `bot.py:1189-1351`).
- –õ–æ–≥–∏ –≤ `logs/bot.log` —Ä–æ—Ç—É—é—Ç—Å—è; –ø—Ä–∏–≥–æ–¥–Ω—ã –¥–ª—è –∞—É–¥–∏—Ç–∏–Ω–≥–∞.
- –§–æ—Ç–æ –º–µ–Ω—é/–±–ª—é–¥ —Ö—Ä–∞–Ω—è—Ç—Å—è –∫–∞–∫ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã (`DishPhotos/*`, `Menu.jpeg`).

### –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —É–∑–∫–∏–µ –º–µ—Å—Ç–∞
- –ì–æ–Ω–∫–∏ –∑–∞–ø–∏—Å–∏ –≤ JSON –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–∞—Ö ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏–ª–∏ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ –ë–î.
- –†–∞–∑–º–µ—Ä `orders.json` —Ä–∞—Å—Ç—ë—Ç –±–µ–∑ –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏ ‚Üí –Ω—É–∂–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è –≤ —Ç–∞–±–ª–∏—Ü—É —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏ –ø–æ –Ω–µ–¥–µ–ª–µ/—Å—Ç–∞—Ç—É—Å—É.
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ (—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ `bot.py:1623-1631`).

## 3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –±–æ—Ç–∞ ‚Üí –≤–µ–±-—Å–∞–π—Ç

### –°—Ü–µ–Ω–∞—Ä–∏–∏ (–∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä ‚Üí —Ü–µ–ª—å)

**–°—Ç–∞—Ä—Ç/–≤–æ–∑–≤—Ä–∞—Ç (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)**
- –®–∞–≥–∏: `/start` ‚Üí –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ ‚Üí –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é (`bot.py:951-1038`).
- –í–∞–ª–∏–¥–∞—Ü–∏–∏: —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –Ω–∞–ª–∏—á–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞.
- –ü–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã: ensure_user_registered, –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è.
- –û—à–∏–±–∫–∏: –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ñ–∞–π–ª–æ–≤ –ª–æ–≥–æ—Ç–∏–ø–∞, –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã (—Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é).
- –í–µ–± UI: –ª–µ–Ω–¥–∏–Ω–≥ —Å CTA, –∫–Ω–æ–ø–∫–∞ ¬´–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –º–µ–Ω—é¬ª, ¬´–°–¥–µ–ª–∞—Ç—å –∑–∞–∫–∞–∑¬ª, –∫–∞—Ä—Ç–æ—á–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤.

**–ü—Ä–æ—Å–º–æ—Ç—Ä –º–µ–Ω—é (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)**
- –®–∞–≥–∏: –∫–æ–º–∞–Ω–¥–∞ ‚Üí –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ç–æ `Menu.jpeg` (–µ—Å–ª–∏ –µ—Å—Ç—å) ‚Üí —Ç–µ–∫—Å—Ç –º–µ–Ω—é ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –∫ –≤—ã–±–æ—Ä—É –¥–Ω—è (`bot.py:1386-1413`).
- –í–∞–ª–∏–¥–∞—Ü–∏—è: –º–µ–Ω—é –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–π –¥–µ–Ω—å (`bot.py:1434-1474`).
- –ü–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã: —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç `selected_day`, `menu_for_day`.
- –í–µ–± UI: —Å—Ç—Ä–∞–Ω–∏—Ü–∞ ¬´–ú–µ–Ω—é –Ω–µ–¥–µ–ª–∏¬ª —Å —Ç–∞–±–∞–º–∏ –ø–æ –¥–Ω—è–º, –≥–∞–ª–µ—Ä–µ–µ–π –±–ª—é–¥ (`DishPhotos/*`).

**–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)**
- –®–∞–≥–∏: –≤—ã–±–æ—Ä –¥–Ω—è ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫–Ω–∞ ‚Üí –≤—ã–±–æ—Ä –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–∞—Å—Ç–æ—Ç—ã ‚Üí —Å–±–æ—Ä –∞–¥—Ä–µ—Å–∞/—Ç–µ–ª–µ—Ñ–æ–Ω–∞ ‚Üí –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ (`bot.py:1429-1760`).
- –í–∞–ª–∏–¥–∞—Ü–∏–∏: –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –¥–Ω—è `_is_day_available_for_order()` (`bot.py:206-239`), –ª–∏–º–∏—Ç –≤—Ä–µ–º–µ–Ω–∏ (`ORDER_CUTOFF_HOUR` `bot.py:73`), –∞–Ω—Ç–∏—Å–ø–∞–º (10 —Å–µ–∫) (`bot.py:1511-1519`), –Ω–∞–ª–∏—á–∏–µ –ø—Ä–æ—Ñ–∏–ª—è.
- –ü–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã: –∑–∞–ø–∏—Å—å `pending_order`, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è, —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ `save_order()` (`bot.py:1605-1698`).
- –û—à–∏–±–∫–∏/—Ä–µ—Ç—Ä–∞–∏: –Ω–µ–≤–µ—Ä–Ω—ã–π –¥–µ–Ω—å, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–Ω–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞, –ø—É—Å—Ç–æ–π –∞–¥—Ä–µ—Å, –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–∫–∞–∑ ‚Üí `DUPLICATE`.
- –í–µ–± UI: –º–∞—Å—Ç–µ—Ä –∏–∑ 3 —à–∞–≥–æ–≤ (–¥–µ–Ω—å/–∫–æ–ª-–≤–æ ‚Üí –∞–¥—Ä–µ—Å/–∫–æ–Ω—Ç–∞–∫—Ç—ã ‚Üí –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ). –ê–≤—Ç–æ–ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è, –æ—Ç–¥–µ–ª—å–Ω—ã–π –±–ª–æ–∫ ¬´–°–ª–µ–¥—É—é—â–∞—è –Ω–µ–¥–µ–ª—è¬ª.

**–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)**
- –®–∞–≥–∏: –ø—Ä–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º –∑–∞–∫–∞–∑–µ –∑–∞ —Ç–æ—Ç –∂–µ –¥–µ–Ω—å ‚Äî –≤—ã–±–æ—Ä —É–¥–∞–ª–∏—Ç—å/—É–≤–µ–ª–∏—á–∏—Ç—å (`bot.py:1846-1963`).
- –ü–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã: –ª–∏–±–æ –æ—Ç–º–µ–Ω–∞ —Å—Ç–∞—Ä–æ–≥–æ (`set_order_status()`), –ª–∏–±–æ —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞.
- –í–µ–± UI: –¥–∏–∞–ª–æ–≥ ¬´–£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –∑–∞–∫–∞–∑ ‚Üí —É–≤–µ–ª–∏—á–∏—Ç—å –∏–ª–∏ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å¬ª —Å –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–º –æ–±–æ–∏—Ö.

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)**
- –ö–æ–º–∞–Ω–¥–∞ ¬´–ú–æ–∏ –∑–∞–∫–∞–∑—ã¬ª ‚Üí —Å–ø–∏—Å–æ–∫ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö/—Å–ª–µ–¥—É—é—â–∏—Ö –Ω–µ–¥–µ–ª—å (`bot.py:1231-1349`).
- Inline `change_order` ‚Üí –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ (`bot.py:2230-2346`).
- Inline `cancel_order` ‚Üí –æ—Ç–º–µ–Ω–∞ (`bot.py:2188-2269`).
- –í–µ–± UI: –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç —Å —Ç–∞–±–ª–∏—Ü–µ–π –∑–∞–∫–∞–∑–æ–≤, –∫–Ω–æ–ø–∫–∞–º–∏ ¬´–ò–∑–º–µ–Ω–∏—Ç—å¬ª, ¬´–û—Ç–º–µ–Ω–∏—Ç—å¬ª, —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ –¥–µ—Ç–∞–ª–∏.

**Admin: –æ—Ç—á—ë—Ç—ã –∏ –º–µ–Ω—é**
- ¬´–ü–æ–∫–∞–∑–∞—Ç—å –∑–∞–∫–∞–∑—ã –Ω–∞ —ç—Ç—É –Ω–µ–¥–µ–ª—é¬ª ‚Üí –≤—ã–±–æ—Ä –¥–Ω—è ‚Üí –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ (`bot.py:1053-1185`).
- ¬´–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–Ω—é¬ª ‚Üí CRUD –±–ª—é–¥, –Ω–µ–¥–µ–ª—å, —Ñ–æ—Ç–æ, –æ–∫–Ω–æ –∑–∞–∫–∞–∑–æ–≤ (`bot.py:520-884`).
- `/sms` –¥–ª—è —Ä–∞—Å—Å—ã–ª–æ–∫, `/order`, `/cancel` —Å –ø—Ä–∞–≤–∞–º–∏ (`bot.py:1353-1385`, `bot.py:2084-2269`).
- –í–µ–± UI: –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —Å –¥–∞—à–±–æ—Ä–¥–æ–º –∑–∞–∫–∞–∑–æ–≤, —Ñ–æ—Ä–º–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –º–µ–Ω—é-—Ñ–æ—Ç–æ, —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–º –±–ª—é–¥, —Ä–∞—Å—Å—ã–ª–∫–∞–º–∏.

**–°–≤—è–∑–∞—Ç—å—Å—è —Å –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º**
- –ö–Ω–æ–ø–∫–∞ ‚Üí —Ç–µ–∫—Å—Ç —Å —Å—Å—ã–ª–∫–∞–º–∏/—Ç–µ–ª–µ—Ñ–æ–Ω–æ–º/Instagram (`bot.py:2440-2482`).
- –í–µ–± UI: –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏, QR, –∫–Ω–æ–ø–∫–∞–º–∏ –±—ã—Å—Ç—Ä–æ–≥–æ –∑–≤–æ–Ω–∫–∞.

### –¢–∞–±–ª–∏—Ü–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
| –§–∏—á–∞ | –¢–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤ –±–æ—Ç–µ | –¶–µ–ª–µ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –Ω–∞ —Å–∞–π—Ç–µ | –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ | –†–∏—Å–∫–∏ |
| --- | --- | --- | --- | --- |
| –ü—Ä–æ—Å–º–æ—Ç—Ä –º–µ–Ω—é | –§–æ—Ç–æ + —Ç–µ–∫—Å—Ç, —Ç—Ä–µ–±—É–µ—Ç—Å—è `Menu.jpeg` (`bot.py:1386-1413`) | –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å —Ç–∞–±–∞–º–∏, fallback –±–µ–∑ —Ñ–æ—Ç–æ | –ú–µ–Ω—é API, CDN –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π | –ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –º–µ–Ω—é/—Ñ–æ—Ç–æ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ |
| –ó–∞–∫–∞–∑ –æ–±–µ–¥–∞ | FSM —Å —à–∞–≥–∞–º–∏ –∏ inline-–∫–Ω–æ–ø–∫–∞–º–∏ (`bot.py:1429-1760`) | SPA-–º–∞—Å—Ç–µ—Ä, –ø—Ä–æ—Ñ–∏–ª—å –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞ | Auth, Orders API, –≤–∞–ª–∏–¥–∞—Ç–æ—Ä —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è | –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Å–µ—Å—Å–∏–∏ |
| –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ/–∏–∑–º–µ–Ω–µ–Ω–∏–µ | Inline –¥–µ–π—Å—Ç–≤–∏—è (`bot.py:1846-2346`) | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–∑ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞, –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π | Audit trail, optimistic locking | –ì–æ–Ω–∫–∏ –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ |
| –û—Ç—á—ë—Ç—ã –∞–¥–º–∏–Ω–∞ | –¢–µ–∫—Å—Ç–æ–≤—ã–µ —Å–≤–æ–¥–∫–∏ –≤ —á–∞—Ç–µ (`bot.py:1053-1185`) | –î–∞—à–±–æ—Ä–¥ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏, CSV/Excel —ç–∫—Å–ø–æ—Ä—Ç | Analytics service, RBAC | –ü–æ–≤—ã—à–µ–Ω–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –ë–î |
| –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–Ω—é | –¢–µ–∫—Å—Ç–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã, –∑–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑ Telegram (`bot.py:520-869`) | –í–µ–±-—Ä–µ–¥–∞–∫—Ç–æ—Ä —Å –ø—Ä–µ–≤—å—é –±–ª—é–¥, drag&drop | File storage, WYSIWYG | –ü–æ—Ç–µ—Ä—è —Ñ–æ—Ç–æ –ø—Ä–∏ —Å–±–æ–µ –∑–∞–≥—Ä—É–∑–∫–∏ |
| –†–∞—Å—Å—ã–ª–∫–∞ | –ö–æ–º–∞–Ω–¥–∞ `/sms` | –í–µ–±-—Ñ–æ—Ä–º–∞ —Å —à–∞–±–ª–æ–Ω–∞–º–∏, —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–µ–π | Notification service, rate limiting | –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞ —Å–ø–∞–º |

### –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∫–æ–º–∞–Ω–¥ –∏ –≤–µ–±-UI –ø–æ—Ç–æ–∫–æ–≤
| –ö–æ–º–∞–Ω–¥–∞/–∫–Ω–æ–ø–∫–∞ | –í–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü–∞/–ø–æ—Ç–æ–∫ |
| --- | --- |
| `/start`, `üîÑ –í –Ω–∞—á–∞–ª–æ` | –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ / onboarding
| `–ü–æ–∫–∞–∑–∞—Ç—å –º–µ–Ω—é –Ω–∞ –Ω–µ–¥–µ–ª—é` | `/menu`
| `–ó–∞–∫–∞–∑–∞—Ç—å –æ–±–µ–¥` | `/order/new`
| `–ú–æ–∏ –∑–∞–∫–∞–∑—ã` | `/account/orders`
| `–ü–æ–∫–∞–∑–∞—Ç—å –∑–∞–∫–∞–∑—ã –Ω–∞ —ç—Ç—É –Ω–µ–¥–µ–ª—é` | `/admin/reports`
| `–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–Ω—é` | `/admin/menu`
| `/order <ID>` | `/orders/{id}` (–¥–æ—Å—Ç—É–ø –ø–æ —Ä–æ–ª—è–º)
| `/cancel <ID>` | `/orders/{id}/cancel`
| `/sms` | `/admin/broadcast`

### UX-—É–ª—É—á—à–µ–Ω–∏—è –¥–ª—è –≤–µ–±–∞
- –ö–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–π –≤—ã–±–æ—Ä –Ω–µ–¥–µ–ª—å –∏ –¥–Ω–µ–π –≤–º–µ—Å—Ç–æ reply-–∫–ª–∞–≤–∏–∞—Ç—É—Ä.
- –ê–≤—Ç–æ–∫–æ–º–ø–ª–∏—Ç –∞–¥—Ä–µ—Å–∞ (Google Places/Mapbox) –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤.
- –®–∞–≥ ¬´–û–ø–ª–∞—Ç–∞¬ª —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –æ–Ω–ª–∞–π–Ω-–æ–ø–ª–∞—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ).
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ email/SMS/push, —Å—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ (–Ω–æ–≤—ã–π, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω, –¥–æ—Å—Ç–∞–≤–ª–µ–Ω).
- –†–æ–ª–µ–≤–∞—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —Å –¥–∞—à–±–æ—Ä–¥–æ–º KPI.

## 4. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ü–µ–ª–µ–≤–æ–≥–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –õ–æ–≥–∏—á–µ—Å–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **Frontend (Next.js/React)**: SPA —Å SSR –¥–ª—è SEO, –º–∞—Ä—à—Ä—É—Ç—ã `/menu`, `/order`, `/account`, `/admin`. UI-–±–∏–±–ª–∏–æ—Ç–µ–∫–∞ (Chakra/MUI) + i18n.
- **Backend API (FastAPI)**: —Ä–µ–∞–ª–∏–∑—É–µ—Ç –¥–æ–º–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã (–º–µ–Ω—é, –∑–∞–∫–∞–∑—ã, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, —Ä–∞—Å—Å—ã–ª–∫–∏). –í—ã–Ω–µ—Å–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å –æ–±—â–∏—Ö –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª –∏–∑ `bot.py`.
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL)**: —Ç–∞–±–ª–∏—Ü—ã `users`, `orders`, `menu_weeks`, `menu_items`, `order_windows`, `broadcasts`, –∏–Ω–¥–µ–∫—Å—ã –ø–æ `delivery_date`, `status`, `user_id`.
- **Cache/Session (Redis)**: rate limiting, —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π, —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞–Ω–∏—è.
- **–§–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (S3/MinIO)**: –º–µ–Ω—é-—Ñ–æ—Ç–æ, –ª–æ–≥–æ—Ç–∏–ø—ã, gif.
- **Queue/worker (Celery/RQ)**: –º–∞—Å—Å–æ–≤—ã–µ —Ä–∞—Å—Å—ã–ª–∫–∏, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.
- **Secrets**: HashiCorp Vault –∏–ª–∏ AWS Secrets Manager; dotenv —Ç–æ–ª—å–∫–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.
- **Observability**: Prometheus/Grafana, Sentry –¥–ª—è –æ—à–∏–±–æ–∫, —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏.

### –°–∞–π—Ç–º–∞–ø
| URL | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –†–æ–ª—å | –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö | –°–æ—Å—Ç–æ—è–Ω–∏—è/–æ—à–∏–±–∫–∏ |
| --- | --- | --- | --- | --- |
| `/` | –õ–µ–Ω–¥–∏–Ω–≥, CTA | –ì–æ—Å—Ç—å | Menu API, —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç | 200, 500
| `/menu` | –ú–µ–Ω—é –Ω–µ–¥–µ–ª–∏, —Ñ–æ—Ç–æ –±–ª—é–¥ | –ì–æ—Å—Ç—å | `GET /menu/week` | 200, 404 (–Ω–µ—Ç –º–µ–Ω—é)
| `/order/new` | –ú–∞—Å—Ç–µ—Ä –∑–∞–∫–∞–∑–∞ | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–ª–∏–µ–Ω—Ç | Orders API, Menu API | –í–∞–ª–∏–¥–∞—Ü–∏–∏ 422, 409 (–¥—É–±–ª–∏–∫–∞—Ç)
| `/account/orders` | –°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤ | –ö–ª–∏–µ–Ω—Ç | `GET /orders?mine=1` | 200, 401, 500
| `/orders/{id}` | –î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞ | –ö–ª–∏–µ–Ω—Ç/–ê–¥–º–∏–Ω | `GET /orders/{id}` | 200, 403, 404
| `/admin` | –î–∞—à–±–æ—Ä–¥ | –ê–¥–º–∏–Ω | Aggregations | 200, 403
| `/admin/menu` | CRUD –º–µ–Ω—é | –ê–¥–º–∏–Ω | Menu API | 200, 400, 500
| `/admin/reports` | –û—Ç—á—ë—Ç—ã –ø–æ –Ω–µ–¥–µ–ª–µ/–¥–Ω—é | –ê–¥–º–∏–Ω | Reports API | 200, 204
| `/admin/broadcast` | –†–∞—Å—Å—ã–ª–∫–∏ | –ê–¥–º–∏–Ω | Broadcast API | 200, 400, 429
| `/login` | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è | –ì–æ—Å—Ç—å | Auth API | 200, 401

### REST/GraphQL API (REST baseline)
| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | Request | Response | –ö–æ–¥—ã –æ—à–∏–±–æ–∫ | –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å |
| --- | --- | --- | --- | --- | --- |
| `GET` | `/menu/week` | `?date=YYYY-MM-DD` (optional) | `{week, items[]}` | 404 (–Ω–µ—Ç –º–µ–Ω—é), 500 | –î–∞ |
| `POST` | `/orders` | `{day, count, address, phone, weekStart}` | `{orderId, status}` | 400 (–≤–∞–ª–∏–¥–∞—Ü–∏—è), 409 (–¥—É–±–ª–∏–∫–∞—Ç), 422 | –ù–µ—Ç |
| `PATCH` | `/orders/{id}` | `{count}` –∏–ª–∏ `{address}` | `{orderId, status}` | 403, 404, 409 | –ß–∞—Å—Ç–∏—á–Ω–æ |
| `POST` | `/orders/{id}/cancel` | `{reason}` | `{orderId, status}` | 403, 404 | –ù–µ—Ç |
| `GET` | `/orders` | `?mine=1` / `?week=...` | `[{...}]` | 401, 500 | –î–∞ |
| `POST` | `/admin/broadcasts` | `{channels, html}` | `{id, sent, failed}` | 400, 403, 429 | –ù–µ—Ç |
| `PUT` | `/admin/menu/week` | `{title}` | `{week}` | 400, 403 | –î–∞ |
| `PUT` | `/admin/menu/{day}` | `{items[]}` | `{day, items[]}` | 400, 403 | –î–∞ |
| `POST` | `/admin/menu/photo` | multipart image | `{url}` | 400, 413, 500 | –ù–µ—Ç |
| `POST` | `/admin/order-window` | `{enabled, weekStart}` | `{enabled, weekStart}` | 400, 403 | –î–∞ |

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- JWT (access+refresh) –∏–ª–∏ session cookies (Next.js + FastAPI). –•—Ä–∞–Ω–µ–Ω–∏–µ refresh –≤ httpOnly cookie.
- –†–æ–ª–∏: `customer`, `admin`. –ê–¥–º–∏–Ω –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–æ –ë–î –∏ —Å–≤—è–∑—ã–≤–∞–µ—Ç—Å—è —Å Telegram ID –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.
- Rate limiting (Redis) –Ω–∞ `POST /orders`, `/admin/broadcasts`.
- –†–µ–ö–∞–ø—á–∞/anti-bot –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞ –≥–æ—Å—Ç–µ–º.

### –ù–µ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- SLA: p95 < 300 –º—Å –¥–ª—è —á—Ç–µ–Ω–∏—è –º–µ–Ω—é, < 500 –º—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞.
- –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å: –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ backend/worker; CDN –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤.
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: JSON-–ª–æ–≥–∏, –∫–æ—Ä–µ–ª—è—Ü–∏—è trace-id, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ELK/Datadog.
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: health-check `/healthz`, `/readyz`; –∞–ª–µ—Ä—Ç—ã –ø–æ –æ—à–∏–±–∫–∞–º 5xx, —Ä–æ—Å—Ç—É –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞.
- –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö: –±—ç–∫–∞–ø—ã PostgreSQL (Point-In-Time Recovery), –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ S3.

## 5. –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏–∫–∏ –∏–∑ –±–æ—Ç–∞

### –®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ (—Å –æ—Ü–µ–Ω–∫–æ–π)
- **S / 3 –¥–Ω.** –í—ã–¥–µ–ª–∏—Ç—å –¥–æ–º–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã (–º–µ–Ω—é, –∑–∞–∫–∞–∑—ã, –ø—Ä–æ—Ñ–∏–ª–∏) –∏–∑ `bot.py` –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å, –ø–æ–∫—Ä—ã—Ç—å unit-—Ç–µ—Å—Ç–∞–º–∏ –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –æ–±—Ä–∞—Ç–Ω–æ –≤ –±–æ—Ç–∞.
- **M / 5 –¥–Ω.** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å REST API (FastAPI) –ø–æ–≤–µ—Ä—Ö –Ω–æ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, —Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –µ—â—ë –≤ JSON, –¥–æ–±–∞–≤–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é —á–µ—Ä–µ–∑ Telegram OAuth –∏–ª–∏ magic-link.
- **M / 6 –¥–Ω.** –í–Ω–µ–¥—Ä–∏—Ç—å PostgreSQL, –Ω–∞–ø–∏—Å–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ (Alembic), —Å–∫—Ä–∏–ø—Ç—ã –ø–µ—Ä–µ–Ω–æ—Å–∞ `users.json`/`orders.json`/`menu.json`.
- **L / 8 –¥–Ω.** –†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –≤–µ–±-—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ (Next.js), –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫ API, —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å.
- **M / 4 –¥–Ω.** –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (email/SMS), –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, –∞–Ω—Ç–∏–±–æ—Ç-–∑–∞—â–∏—Ç—É.
- **S / 2 –¥–Ω.** –ó–∞–≤–µ—Ä—à–∏—Ç—å co-existence: —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ –º–µ–∂–¥—É –±–æ—Ç–æ–º –∏ –≤–µ–±–æ–º, —Ñ–∏—á–∞-—Ñ–ª–∞–≥–∏, –∫–∞–Ω–∞—Ä–µ–µ—á–Ω—ã–π –∑–∞–ø—É—Å–∫.

### –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∏ –∞–¥–∞–ø—Ç–µ—Ä—ã
- –°–æ–∑–¥–∞—Ç—å –∞–¥–∞–ø—Ç–µ—Ä Telegram ‚Üî REST: –±–æ—Ç –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ API –≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–π –∑–∞–ø–∏—Å–∏, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –µ–¥–∏–Ω–æ–µ –¥–æ–º–µ–Ω–Ω–æ–µ —è–¥—Ä–æ.
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å `order_window` –∏ `menu` —á–µ—Ä–µ–∑ API, –∑–∞–ø—Ä–µ—Ç–∏—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ JSON –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏.
- –ö–∞–Ω–∞—Ä–µ–µ—á–Ω—ã–π –∑–∞–ø—É—Å–∫: 10% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ–ª—É—á–∞—é—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –≤–µ–±, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è –≤ –±–æ—Ç–µ. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—à–∏–±–æ–∫/–∫–æ–Ω–≤–µ—Ä—Å–∏–∏.
- –†–æ–ª–ª–±–µ–∫: —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –¥–æ–º–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ JSON driver.

### –ü–ª–∞–Ω —Ä–∞–±–æ—Ç –ø–æ —Å–ø—Ä–∏–Ω—Ç–∞–º
| –°–ø—Ä–∏–Ω—Ç | –¶–µ–ª–∏ | –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç—ã | KPI/–∫—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏ |
| --- | --- | --- | --- |
| 1 (2 –Ω–µ–¥.) | –í—ã–¥–µ–ª–µ–Ω–∏–µ –¥–æ–º–µ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–∏ –∏ API v1 | `domain-core (S/3–¥)`, `REST skeleton (M/5–¥)` | 90% unit coverage core, –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–∏—Å—ã |
| 2 (2 –Ω–µ–¥.) | –•—Ä–∞–Ω–∏–ª–∏—â–µ –∏ –º–∏–≥—Ä–∞—Ü–∏–∏ | `DB migration (M/6–¥)`, `data-migrate scripts (S/2–¥)` | –£—Å–ø–µ—à–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –æ—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω |
| 3 (3 –Ω–µ–¥.) | –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π —Ñ—Ä–æ–Ω—Ç –∏ –∞–¥–º–∏–Ω–∫–∞ | `web-frontend MVP (L/8–¥)`, `admin-dashboard (M/4–¥)` | 95% –∫–ª—é—á–µ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç e2e |
| 4 (1 –Ω–µ–¥.) | Co-existence –∏ –∑–∞–ø—É—Å–∫ | `feature-flags (S/2–¥)`, `monitoring/alerts (S/2–¥)` | –ù—É–ª–µ–≤–∞—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –∑–∞ 72—á –∫–∞–Ω–∞—Ä–µ–µ—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ |

## 6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∫–∞—á–µ—Å—Ç–≤–æ

### –£—Ä–æ–≤–Ω–∏ —Ç–µ—Å—Ç–æ–≤
- Unit: –¥–æ–º–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã (–≤–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–∫–∞–∑–æ–≤, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è ID), —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–Ω—é.
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ: API ‚Üî –ë–î, API ‚Üî Telegram –∞–¥–∞–ø—Ç–µ—Ä.
- E2E: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø—É—Ç–∏ (—Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞, –æ—Ç–º–µ–Ω–∞, –¥—É–±–ª–∏–∫–∞—Ç), –∞–¥–º–∏–Ω-—á–µ–∫.
- –ö–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–µ: OpenAPI —Å—Ö–µ–º—ã –ø—Ä–æ—Ç–∏–≤ –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤.

### –ú–∞—Ç—Ä–∏—Ü–∞ —Ç–µ—Å—Ç-—Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
| –§–ª–æ—É | –ü–æ–∑–∏—Ç–∏–≤–Ω—ã–µ –∫–µ–π—Å—ã | –ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –∫–µ–π—Å—ã | –î–∞–Ω–Ω—ã–µ |
| --- | --- | --- | --- |
| –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ | –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –∞–¥—Ä–µ—Å + —Ç–µ–ª–µ—Ñ–æ–Ω, –¥–æ—Å—Ç–∞–≤–∫–∞ –Ω–∞ —Å–ª–µ–¥. –Ω–µ–¥–µ–ª—é | –î–µ–Ω—å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –ø—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç 4 –ø–æ—Ä—Ü–∏–π, –∞–Ω—Ç–∏—Å–ø–∞–º | –¢–µ—Å—Ç–æ–≤—ã–µ –º–µ–Ω—é, mock Telegram ID |
| –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è | –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É | –ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∑–∞–∫–∞–∑, –≥–æ–Ω–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è | –î–≤–∞ –∑–∞–∫–∞–∑–∞ –Ω–∞ –æ–¥–∏–Ω –¥–µ–Ω—å |
| –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ | –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ | –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–æ–º, —Å—Ç–∞—Ç—É—Å `cancelled` | –ê–∫—Ç–∏–≤–Ω—ã–π –∑–∞–∫–∞–∑ |
| –ê–¥–º–∏–Ω-–æ—Ç—á—ë—Ç | –ù–µ–¥–µ–ª—è —Ü–µ–ª–∏–∫–æ–º, –æ—Ç–¥–µ–ª—å–Ω—ã–π –¥–µ–Ω—å | –ù–µ—Ç –∑–∞–∫–∞–∑–æ–≤, –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –¥–∞—Ç–∞ | –ù–∞–±–æ—Ä –∑–∞–∫–∞–∑–æ–≤ —Ä–∞–∑–Ω—ã—Ö —Å—Ç–∞—Ç—É—Å–æ–≤ |
| –†–∞—Å—Å—ã–ª–∫–∞ | HTML —Å–æ–æ–±—â–µ–Ω–∏–µ, —Ñ–∏–ª—å—Ç—Ä –ø–æ –∞–∫—Ç–∏–≤–Ω—ã–º | –ù–µ—Ç –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π, rate-limit | 10+ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |

### –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- Seed-—Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –º–µ–Ω—é –∏ 3 —Ç–µ—Å—Ç–æ–≤—ã—Ö –Ω–µ–¥–µ–ª—å.
- –§–∏–∫—Å—Ç—É—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏/–∞–¥—Ä–µ—Å–∞–º–∏.
- –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–∞–∑—ã per environment (local/test/staging).
- Mock —Å–µ—Ä–≤–∏—Å–æ–≤ SMS/email.

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏ –ø–æ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–º
- –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç ¬´domain-core¬ª: –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –±–æ—Ç-–∫–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ –Ω–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã; unit-—Ç–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç >80% –≤–µ—Ç–≤–µ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏.
- –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç ¬´API+DB¬ª: e2e-—Ç–µ—Å—Ç ¬´–∑–∞–∫–∞–∑ ‚Üí –æ—Ç—á—ë—Ç¬ª –ø—Ä–æ—Ö–æ–¥–∏—Ç –Ω–∞ staging, –º–∏–≥—Ä–∞—Ü–∏—è –æ—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç—Å—è –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö.
- –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç ¬´Web MVP¬ª: Lighthouse > 80, e2e-—Ç–µ—Å—Ç—ã Cypress —É—Å–ø–µ—à–Ω—ã, –Ω–∏ –æ–¥–Ω–æ–≥–æ —Ä–µ–≥—Ä–µ—Å—Å–∞ –≤ –±–æ—Ç–µ.
- –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç ¬´Launch¬ª: –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∞–ª–µ—Ä—Ç–æ–≤, NPS –ø–∏–ª–æ—Ç–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π ‚â• 8.

## 7. DevEx –∏ CI/CD

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫
- –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è: Python 3.13, Node 20+, PostgreSQL 15+, Redis.
- –ö–æ–º–∞–Ω–¥—ã (–ø—Ä–µ–¥–ª–∞–≥–∞–µ–º—ã–µ):
  - `make install` ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (pip + npm).
  - `make serve-api` ‚Äî –∑–∞–ø—É—Å–∫ FastAPI —á–µ—Ä–µ–∑ Uvicorn.
  - `make serve-web` ‚Äî –∑–∞–ø—É—Å–∫ Next.js dev.
  - `make migrate` ‚Äî –ø—Ä–æ–≥–æ–Ω Alembic –º–∏–≥—Ä–∞—Ü–∏–π.
  - `make seed` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –º–µ–Ω—é/–∑–∞–∫–∞–∑–æ–≤.
- –î–æ–∫–µ—Ä-–∫–æ–º–ø–æ—É–∑ –¥–ª—è –ë–î/–†–µ–¥–∏—Å–∞/MinIO.

### CI pipeline (GitHub Actions/GitLab CI)
- –°—Ç–µ–π–¥–∂–∏: `lint` (ruff, mypy), `test` (pytest, coverage), `build-web` (Next.js), `security` (bandit, npm audit), `package` (Docker images API –∏ web).
- –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã: coverage reports, Docker images —Å —Ç–µ–≥–æ–º commit.
- Quality gates: unit coverage ‚â• 80%, –ª–∏–Ω—Ç–µ—Ä –±–µ–∑ –æ—à–∏–±–æ–∫, —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –Ω–µ –≤—ã—à–µ medium.

### CD –∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- Environments: `dev` (feature-–≤–µ—Ç–∫–∏), `staging` (–∫–∞–Ω–∞—Ä–µ–µ—á–Ω—ã–π), `prod`.
- Deployment: GitOps (ArgoCD) –∏–ª–∏ Terraform + Helm.
- Health-checks `/healthz`, `/readyz`, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π rollback –ø–æ –æ—à–∏–±–∫–∞–º >5% –∑–∞ 5 –º–∏–Ω—É—Ç.
- –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î: `alembic upgrade` –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–π, –æ—Ç–∫–∞—Ç `downgrade` –ø—Ä–∏ –ø—Ä–æ–≤–∞–ª–µ health-check.

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–∞–º–∏
- –õ–æ–∫–∞–ª—å–Ω–æ: `.env.local` (–Ω–µ –≤ git).
- CI/CD: Vault/Secrets Manager, –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —á–µ—Ä–µ–∑ environment variables.
- –†–µ–≥—É–ª—è—Ä–Ω–∞—è —Ä–æ—Ç–∞—Ü–∏—è Telegram —Ç–æ–∫–µ–Ω–∞ (—Ç–µ–∫—É—â–∏–π –≤ `config_secret.py` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–º–µ–Ω—ë–Ω –∏ –∏—Å–∫–ª—é—á—ë–Ω –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è).

## 8. –†–∏—Å–∫–∏ –∏ –æ—Ç–∫—Ä—ã—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã

### –¢–∞–±–ª–∏—Ü–∞ —Ä–∏—Å–∫–æ–≤
| –†–∏—Å–∫ | –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å | –í–ª–∏—è–Ω–∏–µ | –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Å–Ω–∏–∂–µ–Ω–∏—è |
| --- | --- | --- | --- |
| –ù–µ—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –º–µ–∂–¥—É –±–æ—Ç–æ–º –∏ —Å–∞–π—Ç–æ–º | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–æ–µ | –ï–¥–∏–Ω—ã–π API-—Å–ª–æ–π, –º–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ –ë–î –ø–µ—Ä–µ–¥ –≤–∫–ª—é—á–µ–Ω–∏–µ–º –≤–µ–±–∞ |
| –ü–æ—Ç–µ—Ä—è –∑–∞–∫–∞–∑–æ–≤ –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ JSON ‚Üí –ë–î | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–æ–µ | –ë—ç–∫–∞–ø—ã, dry-run –º–∏–≥—Ä–∞—Ü–∏–π, –≤–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–ø–∏—Å–µ–π checksum |
| –°–ø–∞–º —á–µ—Ä–µ–∑ –≤–µ–±-—Ñ–æ—Ä–º—É –∑–∞–∫–∞–∑–∞ | –ù–∏–∑–∫–∞—è | –°—Ä–µ–¥–Ω–µ–µ | Rate limiting, CAPTCHA, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ |
| –£—Ç–µ—á–∫–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤ (bot token —É–∂–µ –≤ git) | –í—ã—Å–æ–∫–∞—è | –í—ã—Å–æ–∫–æ–µ | –†–æ—Ç–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤ |
| –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π UX –¥–ª—è –∞–¥–º–∏–Ω–∞ | –°—Ä–µ–¥–Ω—è—è | –°—Ä–µ–¥–Ω–µ–µ | Usability-—Ç–µ—Å—Ç—ã, –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω—ã–π –≤—ã–ø—É—Å–∫ —Ñ—É–Ω–∫—Ü–∏–π |

### –û—Ç–∫—Ä—ã—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã
- –¢—Ä–µ–±—É—é—Ç—Å—è –ª–∏ –æ–Ω–ª–∞–π–Ω–æ–≤—ã–µ –æ–ø–ª–∞—Ç—ã –∏–ª–∏ –æ—Å—Ç–∞—ë—Ç—Å—è –æ–ø–ª–∞—Ç–∞ –∫—É—Ä—å–µ—Ä—É?
- –ù—É–∂–Ω–æ –ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ Telegram (OneTap) –∏–ª–∏ –≤–≤–æ–¥–∏—Ç—å email/–ø–∞—Ä–æ–ª—å?
- –ö–∞–∫–∏–µ –∫–∞–Ω–∞–ª—ã —Ä–∞—Å—Å—ã–ª–æ–∫ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã (SMS, email, –ø—É—à)?
- –ù—É–∂–Ω–∞ –ª–∏ –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å (RU/GE/EN) –Ω–∞ –ø–µ—Ä–≤–æ–º —ç—Ç–∞–ø–µ?
- –ö–∞–∫–æ–π SLA —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ –¥–æ—Å—Ç–∞–≤–∫–µ –∏ –¥–æ—Å—Ç—É–ø–Ω—ã –ª–∏ –≤–Ω–µ—à–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (CRM, 1C)?

## Quickstart
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Python 3.13, Node 20, PostgreSQL, Redis (`brew install python@3.13 node postgresql redis`).
- –°–∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π, —Å–æ–∑–¥–∞—Ç—å `.env.local` —Å —Ñ–∏–∫—Ç–∏–≤–Ω—ã–º–∏ —Å–µ–∫—Ä–µ—Ç–∞–º–∏.
- –ó–∞–ø—É—Å—Ç–∏—Ç—å `python -m venv venv && source venv/bin/activate && pip install -r requirements.txt` (—Å–æ–∑–¥–∞—Ç—å requirements –Ω–∞ –æ—Å–Ω–æ–≤–µ `pip freeze`).
- –ó–∞–ø—É—Å—Ç–∏—Ç—å `uvicorn app.main:app --reload` –∏ `npm install && npm run dev` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞.
- –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ –º–µ–Ω—é —á–µ—Ä–µ–∑ `python scripts/seed_menu.py` (—Å–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç).
- –ü—Ä–æ–π—Ç–∏ e2e-—Å—Ü–µ–Ω–∞—Ä–∏–π: —Å–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑, –∏–∑–º–µ–Ω–∏—Ç—å, –æ—Ç–º–µ–Ω–∏—Ç—å, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç—á—ë—Ç –≤ –∞–¥–º–∏–Ω–∫–µ.
